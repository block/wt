<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worktree Manager</title>
<style>
    /* Theme colors injected from IntelliJ at runtime */
    /*{{THEME_CSS}}*/

    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap');

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
        font-family: 'Source Serif 4', Georgia, 'Times New Roman', serif;
        background: var(--bg);
        color: var(--fg);
        line-height: 1.7;
        padding: 0;
        -webkit-font-smoothing: antialiased;
    }

    .page {
        max-width: 860px;
        margin: 0 auto;
        padding: 48px 32px 40px;
    }

    /* ── Hero ── */
    .hero {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        margin-bottom: 48px;
        padding-bottom: 40px;
        border-bottom: 1px solid var(--border);
    }

    .hero-icon {
        flex-shrink: 0;
        width: 56px;
        height: 56px;
        background: var(--accent);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 2px;
    }

    .hero-icon svg {
        width: 30px;
        height: 30px;
        fill: none;
        stroke: var(--accent-fg);
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
    }

    .hero-text h1 {
        font-family: 'JetBrains Mono', 'Menlo', 'Consolas', monospace;
        font-size: 26px;
        font-weight: 700;
        letter-spacing: -0.5px;
        line-height: 1.2;
    }

    .hero-text .tagline {
        color: var(--muted);
        font-size: 15px;
        margin-top: 6px;
        line-height: 1.5;
    }

    .hero-text .tag {
        display: inline-block;
        margin-top: 10px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 500;
        padding: 2px 10px;
        border-radius: 20px;
        background: var(--tag-bg);
        color: var(--tag-fg);
        border: 1px solid var(--tag-border);
        letter-spacing: 0.3px;
    }

    /* ── Section Headings ── */
    .section-label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        color: var(--subtle);
        margin-bottom: 20px;
    }

    /* ── Quick Reference ── */
    .quick-ref {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1px;
        background: var(--border);
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 48px;
    }

    .quick-ref-item {
        background: var(--surface);
        padding: 16px 20px;
        display: flex;
        align-items: center;
        gap: 14px;
        transition: background 0.15s ease;
    }

    .quick-ref-item:hover {
        background: var(--surface-hover);
    }

    .ref-icon {
        flex-shrink: 0;
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--accent-bg);
        border: 1px solid var(--accent-border);
    }

    .ref-icon svg {
        width: 18px;
        height: 18px;
        stroke: var(--accent);
        fill: none;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
    }

    .ref-content {
        flex: 1;
        min-width: 0;
    }

    .ref-title {
        font-family: 'JetBrains Mono', monospace;
        font-size: 13px;
        font-weight: 600;
        line-height: 1.3;
    }

    .ref-desc {
        color: var(--muted);
        font-size: 12.5px;
        line-height: 1.4;
        margin-top: 2px;
    }

    kbd {
        display: inline-block;
        font-family: 'JetBrains Mono', monospace;
        font-size: 10.5px;
        font-weight: 500;
        padding: 2px 7px;
        border-radius: 4px;
        background: var(--kbd-bg);
        border: 1px solid var(--kbd-border);
        box-shadow: 0 1px 0 var(--kbd-shadow);
        line-height: 1.4;
        white-space: nowrap;
        vertical-align: middle;
        position: relative;
        top: -1px;
    }

    /* ── How It Works Diagram ── */
    .diagram-section {
        margin-bottom: 48px;
    }

    .diagram {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 28px 24px;
        overflow-x: auto;
    }

    .diagram-flow {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0;
        min-width: 600px;
        padding: 8px 0;
    }

    .diagram-node {
        text-align: center;
        flex-shrink: 0;
    }

    .node-box {
        font-family: 'JetBrains Mono', monospace;
        font-size: 11.5px;
        font-weight: 600;
        padding: 10px 16px;
        border-radius: 8px;
        border: 2px solid var(--diagram-node);
        color: var(--diagram-node);
        background: var(--surface);
        white-space: nowrap;
        line-height: 1.3;
    }

    .node-box.primary {
        background: var(--diagram-node);
        color: var(--diagram-node-fg);
    }

    .node-label {
        font-size: 10.5px;
        color: var(--muted);
        margin-top: 6px;
        font-family: 'JetBrains Mono', monospace;
    }

    .diagram-arrow {
        display: flex;
        align-items: center;
        padding: 0 6px;
        flex-shrink: 0;
    }

    .diagram-arrow svg {
        width: 40px;
        height: 20px;
        stroke: var(--diagram-arrow);
        fill: none;
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
    }

    .arrow-label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 9.5px;
        color: var(--subtle);
        text-align: center;
        margin-top: -4px;
        white-space: nowrap;
    }

    /* ── Screenshot ── */
    .screenshot-section {
        margin-bottom: 48px;
    }

    .screenshot-frame {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        box-shadow: var(--shadow-card);
    }

    .screenshot-frame img {
        display: block;
        width: 100%;
        height: auto;
    }

    .screenshot-caption {
        padding: 10px 16px;
        border-top: 1px solid var(--border);
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        color: var(--muted);
        text-align: center;
    }

    /* ── Getting Started Steps ── */
    .steps-section {
        margin-bottom: 48px;
    }

    .steps {
        list-style: none;
        counter-reset: step-counter;
        display: flex;
        flex-direction: column;
        gap: 0;
    }

    .step {
        counter-increment: step-counter;
        display: flex;
        gap: 16px;
        padding: 18px 0;
        border-bottom: 1px solid var(--border);
        align-items: flex-start;
    }

    .step:first-child {
        padding-top: 0;
    }

    .step:last-child {
        border-bottom: none;
        padding-bottom: 0;
    }

    .step-num {
        flex-shrink: 0;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 2px solid var(--step-num);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'JetBrains Mono', monospace;
        font-size: 12px;
        font-weight: 700;
        color: var(--step-num);
        margin-top: 1px;
    }

    .step-body {
        flex: 1;
        min-width: 0;
    }

    .step-title {
        font-family: 'JetBrains Mono', monospace;
        font-size: 13.5px;
        font-weight: 600;
        line-height: 1.4;
        margin-bottom: 3px;
    }

    .step-desc {
        color: var(--muted);
        font-size: 13.5px;
        line-height: 1.55;
    }

    .step-desc code {
        font-family: 'JetBrains Mono', monospace;
        font-size: 12px;
        padding: 1px 6px;
        background: var(--kbd-bg);
        border: 1px solid var(--border);
        border-radius: 3px;
    }

    /* ── Tips ── */
    .tips-section {
        margin-bottom: 48px;
    }

    .tip-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }

    .tip {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 16px 18px;
        box-shadow: var(--shadow-card);
        transition: box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .tip:hover {
        box-shadow: var(--shadow-card-hover);
        border-color: var(--border-strong);
    }

    .tip-label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 10px;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--accent);
        margin-bottom: 6px;
    }

    .tip-text {
        font-size: 13px;
        line-height: 1.5;
        color: var(--muted);
    }

    .tip-text strong {
        color: var(--fg);
        font-weight: 600;
    }

    /* ── Footer ── */
    .footer {
        padding-top: 24px;
        border-top: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: var(--subtle);
        font-size: 12px;
    }

    .footer-left {
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
    }

    .footer-right {
        font-size: 12px;
    }

    /* ── Animations ── */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(12px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .hero { animation: fadeInUp 0.5s ease both; }
    .quick-ref { animation: fadeInUp 0.5s ease 0.08s both; }
    .diagram-section { animation: fadeInUp 0.5s ease 0.16s both; }
    .screenshot-section { animation: fadeInUp 0.5s ease 0.22s both; }
    .steps-section { animation: fadeInUp 0.5s ease 0.28s both; }
    .tips-section { animation: fadeInUp 0.5s ease 0.34s both; }
    .footer { animation: fadeInUp 0.5s ease 0.4s both; }
</style>
</head>
<body>
<div class="page">

    <!-- Hero -->
    <div class="hero">
        <div class="hero-icon">
            <svg viewBox="0 0 24 24">
                <path d="M7 7h10l-5 5-5-5z"/>
                <path d="M12 12v8"/>
                <path d="M5 3h14"/>
                <circle cx="8" cy="20" r="1.5"/>
                <circle cx="16" cy="20" r="1.5"/>
                <path d="M12 20h4"/>
                <path d="M8 20h-3"/>
                <path d="M16 20h3"/>
            </svg>
        </div>
        <div class="hero-text">
            <h1>Worktree Manager</h1>
            <div class="tagline">Native git worktree management for JetBrains IDEs.<br>Atomic symlink switching &mdash; zero restarts, sub-second context changes.</div>
            <span class="tag">wt CLI companion</span>
        </div>
    </div>

    <!-- Quick Reference -->
    <div class="section-label">Quick Reference</div>
    <div class="quick-ref">
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Switch Worktree <kbd>Ctrl+Alt+W</kbd></div>
                <div class="ref-desc">Swap active worktree instantly via symlink</div>
            </div>
        </div>
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><path d="M12 5v14m-7-7h14"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Create Worktree <kbd>Ctrl+Alt+Shift+W</kbd></div>
                <div class="ref-desc">New worktree from any branch or commit</div>
            </div>
        </div>
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Provision</div>
                <div class="ref-desc">Set up IDE metadata &amp; Bazel symlinks</div>
            </div>
        </div>
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5 5 5-5m-5 5V3"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Metadata Vault</div>
                <div class="ref-desc">Export &amp; import .idea, .ijwb, .vscode</div>
            </div>
        </div>
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 1v2m0 18v2m-9-11h2m18 0h2m-3.3-7.7l-1.4 1.4M4.7 19.3l1.4-1.4m0-11.2L4.7 4.7m14.6 14.6l-1.4-1.4"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Agent Detection</div>
                <div class="ref-desc">Track Claude &amp; AI agents in worktrees</div>
            </div>
        </div>
        <div class="quick-ref-item">
            <div class="ref-icon">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 15h18"/><path d="M8 19h2m4 0h2"/></svg>
            </div>
            <div class="ref-content">
                <div class="ref-title">Status Bar &amp; Tool Window</div>
                <div class="ref-desc">Active context visible at a glance</div>
            </div>
        </div>
    </div>

    <!-- How It Works -->
    <div class="diagram-section">
        <div class="section-label">How Switching Works</div>
        <div class="diagram">
            <div class="diagram-flow">
                <div class="diagram-node">
                    <div class="node-box">~/dev/myrepo</div>
                    <div class="node-label">symlink</div>
                </div>
                <div class="diagram-arrow">
                    <div>
                        <svg viewBox="0 0 40 20"><path d="M4 10h28m-6-4l6 4-6 4"/></svg>
                        <div class="arrow-label">points to</div>
                    </div>
                </div>
                <div class="diagram-node">
                    <div class="node-box primary">feature-a/</div>
                    <div class="node-label">active worktree</div>
                </div>
                <div class="diagram-arrow">
                    <div>
                        <svg viewBox="0 0 40 20"><path d="M4 10h28m-6-4l6 4-6 4" stroke-dasharray="4 3"/></svg>
                        <div class="arrow-label">atomic swap</div>
                    </div>
                </div>
                <div class="diagram-node">
                    <div class="node-box">feature-b/</div>
                    <div class="node-label">other worktree</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Screenshot -->
    <div class="screenshot-section">
        <div class="section-label">Tool Window</div>
        <div class="screenshot-frame">
            <img src="{{SCREENSHOT_SRC}}" alt="Worktree Manager tool window showing worktree list with branch, status, agent, and provision columns">
            <div class="screenshot-caption">Worktrees tool window &mdash; branch, status, agent activity, and provision state at a glance</div>
        </div>
    </div>

    <!-- Getting Started -->
    <div class="steps-section">
        <div class="section-label">Getting Started</div>
        <ol class="steps">
            <li class="step">
                <div class="step-num">1</div>
                <div class="step-body">
                    <div class="step-title">Register your repository</div>
                    <div class="step-desc">Go to <code>VCS &gt; Worktrees &gt; Add Context</code> to connect a repo managed by the <code>wt</code> CLI. This links the plugin to your <code>~/.wt/</code> configuration.</div>
                </div>
            </li>
            <li class="step">
                <div class="step-num">2</div>
                <div class="step-body">
                    <div class="step-title">Create or switch worktrees</div>
                    <div class="step-desc">Press <kbd>Ctrl+Alt+Shift+W</kbd> to create a new worktree, or <kbd>Ctrl+Alt+W</kbd> to switch. Switching atomically swaps the symlink &mdash; all open editors reload instantly.</div>
                </div>
            </li>
            <li class="step">
                <div class="step-num">3</div>
                <div class="step-body">
                    <div class="step-title">Browse in the tool window</div>
                    <div class="step-desc">Open the <strong>Worktrees</strong> panel (bottom bar) to see all worktrees with branch, status, agent activity, and provision state. Double-click to switch.</div>
                </div>
            </li>
            <li class="step">
                <div class="step-num">4</div>
                <div class="step-body">
                    <div class="step-title">Provision on first switch</div>
                    <div class="step-desc">When switching to a worktree for the first time, the plugin offers to <strong>provision</strong> it &mdash; importing IDE metadata from the vault and installing Bazel symlinks. This is one-time per worktree.</div>
                </div>
            </li>
            <li class="step">
                <div class="step-num">5</div>
                <div class="step-body">
                    <div class="step-title">Keep metadata in sync</div>
                    <div class="step-desc">Use <code>VCS &gt; Worktrees &gt; Export Metadata</code> to save your current IDE settings to the vault before switching, so other worktrees can import them.</div>
                </div>
            </li>
        </ol>
    </div>

    <!-- Tips -->
    <div class="tips-section">
        <div class="section-label">Tips</div>
        <div class="tip-grid">
            <div class="tip">
                <div class="tip-label">Shortcut</div>
                <div class="tip-text">The <strong>status bar widget</strong> (bottom-right) shows your active context. Click it to quickly switch between repositories.</div>
            </div>
            <div class="tip">
                <div class="tip-label">CLI Sync</div>
                <div class="tip-text">Changes from the <strong><code>wt</code> CLI</strong> are detected automatically via file watchers. No manual refresh needed.</div>
            </div>
            <div class="tip">
                <div class="tip-label">Provision</div>
                <div class="tip-text">If a worktree already has project files, provisioning offers to <strong>keep existing</strong> or <strong>overwrite from vault</strong> &mdash; nothing is lost silently.</div>
            </div>
            <div class="tip">
                <div class="tip-label">Right-Click</div>
                <div class="tip-text">Right-click any worktree row for <strong>Open Terminal</strong>, <strong>Reveal in Finder</strong>, <strong>Copy Path</strong>, and more.</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-left">wt-intellij-plugin</div>
        <div class="footer-right">
            This tab appears once per version. Reopen via <strong>VCS &gt; Worktrees &gt; Worktree Manager Welcome</strong>.
        </div>
    </div>

</div>
</body>
</html>
