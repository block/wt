#!/usr/bin/env bash
#
# wt-help — Help text for the wt command
# ======================================
#
# This file provides the help text for the unified wt command.
# It is sourced by wt.sh.
#

# Display help for the wt command
wt_show_help() {
  cat <<'EOF'
wt — Unified Worktree Toolkit

Usage: wt <command> [args]

Worktree Commands:
  add <branch>              Create a new worktree for a branch
  switch [worktree]         Switch the active worktree symlink
                            - interactive worktree selection if omitted
  remove [worktree]         Remove a worktree
                            - interactive worktree selection if omitted
                            - use --merged to remove all merged-branch worktrees
  list                      List all worktrees with status
  cd [worktree]             Change directory to a worktree
                            - interactive worktree selection if omitted

IntelliJ Metadata Commands:
  ijwb-export [src] [dst]   Export .ijwb directories from source to metadata vault
                            - src: defaults to $WT_MAIN_REPO_ROOT
                            - dst: defaults to $WT_IDEA_FILES_BASE

  ijwb-import [src] [dst]   Import .ijwb metadata into a target worktree
                            - src: defaults to $WT_IDEA_FILES_BASE
                            - dst: interactive worktree selection if omitted

Other:
  help                      Show this help message

Examples:
  wt add feature/my-feature       # Create worktree for new branch
  wt switch                       # Interactive: pick worktree to link
  wt cd                           # Interactive: cd to selected worktree
  wt list                         # Show all worktrees (fast)
  wt remove                       # Interactive: remove a worktree
  wt remove --merged              # Remove all worktrees with merged branches

  wt ijwb-export                  # Export using default paths
  wt ijwb-export ~/repo ~/vault   # Export from specific source to specific vault
  wt ijwb-import                  # Interactive: pick worktree to import into
  wt ijwb-import ~/worktree       # Import into specific worktree
  wt ijwb-import ~/vault ~/wt     # Import from specific vault into worktree

EOF
  cat <<EOF
Environment Variables (configured in lib/wt-common):
  WT_MAIN_REPO_ROOT     Main repository root
                        [current: $WT_MAIN_REPO_ROOT]
  WT_WORKTREES_BASE     Directory where worktrees are created
                        [current: $WT_WORKTREES_BASE]
  WT_IDEA_FILES_BASE    IntelliJ metadata vault location
                        [current: $WT_IDEA_FILES_BASE]
  WT_ACTIVE_WORKTREE    Symlink path for active worktree
                        [current: $WT_ACTIVE_WORKTREE]
  WT_BASE_BRANCH        Default branch for new worktrees
                        [current: $WT_BASE_BRANCH]
EOF
}

